---
import { HwcHeader } from "@hwc/header";
import { HwcMap, OrthoLayer } from "@hwc/map";

const project = {
  name: "Project with Ortho",
  location: { lat: 40.0, lon: -86.0 },
  ortho: { url: 'https://example.com/ortho.tif' }
};

const mapTilerKey = import.meta.env.PUBLIC_MAPTILER_API_KEY || '';
---

<HwcHeader title={project.name} />

<div style="height: calc(100vh - var(--header-h, 60px));">
  <HwcMap
    client:only="react"
    items={[{ 
      id: 'project', 
      lat: project.location.lat, 
      lon: project.location.lon, 
      name: project.name 
    }]}
    initialCenter={[project.location.lat, project.location.lon]}
    initialZoom={18}
    baseLayer="satellite"
    mapTilerKey={mapTilerKey}
  >
    <!-- Ortho overlay as child -->
    <OrthoLayer 
      url={project.ortho.url}
      opacity={0.9}
      onLoad={(georaster) => console.log('Ortho loaded:', georaster)}
      onError={(error) => console.error('Ortho error:', error)}
    />
  </HwcMap>
</div>

<style>
  :root {
    --hwc-red: #EE2F27;
    --hdr-bg: rgba(41, 44, 48, 0.95);
    --hdr-fg: #ffffff;
    --hdr-border: rgba(255, 255, 255, 0.1);
    --accent: #EE2F27;
    --header-h: 60px;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #1a1c20;
    color: #ffffff;
  }
</style>
